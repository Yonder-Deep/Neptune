import pyaudio

p = pyaudio.PyAudio()

# 1. Find the EVO 8 automatically
evo_index = None
for i in range(p.get_device_count()):
    dev = p.get_device_info_by_index(i)
    # Check if name contains "EVO" and it has input channels
    if "EVO" in dev['name'] and dev['maxInputChannels'] > 0:
        evo_index = i
        print(f"Found EVO 8 at index {evo_index}")
        break

if evo_index is None:
    raise Exception("Could not find Audient EVO 8! Is it plugged in?")

# 2. Open the stream using that specific index
stream = p.open(
    format=pyaudio.paInt32,
    channels=2,
    rate=48000,
    input=True,
    input_device_index=evo_index, # Uses the index we found above
    frames_per_buffer=1024
)
